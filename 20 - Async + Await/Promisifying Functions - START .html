<!DOCTYPE html>
<html lang="en">

<head>
  <title>Promisifying Functions</title>
</head>

<body>
  <script>
    // old callback based method
    // navigator.geolocation.getCurrentPosition(function(pos) {
    //   console.log('it worked');
    //   console.log(pos);
    // }, function(err) {
    //   console.log('it failed');
    //   console.error(err);
    // });

    // promisifying the callback based code
    function getCurrentPosition(...args) {
    	return new Promise((resolve, reject) => {
          navigator.geolocation.getCurrentPosition(resolve, reject, ...args);
        });
    }


      async function go() {
          try {
              console.log('starting');
              const position = await getCurrentPosition({});
              console.log(position);
              console.log('finished');
          } catch (err) {
              console.error(err);
          }
      }

    go();
  </script>
</body>

</html>